"use strict";(self.webpackChunkconnections_app=self.webpackChunkconnections_app||[]).push([[916],{9916:(Z,f,s)=>{s.r(f),s.d(f,{GroupDialogComponent:()=>G});var t=s(9212),u=s(6814),h=s(6385),p=s(617),g=s(2296),r=s(2032),v=s(5683),a=s(6223),d=s(5959),c=s(2572),D=s(7398),M=s(7378),x=s(805),C=s(2171),$=s(6825),A=s(3923),y=s(5496),I=s(7700);function b(n,T){if(1&n&&(t.TgZ(0,"div",1),t.ALo(1,"async"),t.TgZ(2,"p",2),t._uU(3),t.ALo(4,"async"),t.qZA(),t.TgZ(5,"p",3),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"p",4),t._uU(9),t.qZA()()),2&n){const e=T.$implicit,i=t.oxw();t.Udp("text-align",e.authorId==t.lcZ(1,5,i.userId$)?"right":"left"),t.xp6(3),t.hij("",e.authorId==t.lcZ(4,7,i.userId$)?"me":e.authorName," "),t.xp6(3),t.hij("",t.xi3(7,9,e.message.createdAt.S,"medium")," "),t.xp6(3),t.hij("",e.message.message.S," ")}}let S=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-message-list"]],inputs:{namedMessage$:"namedMessage$",userId$:"userId$"},standalone:!0,features:[t.jDz],decls:4,vars:2,consts:[[1,"group__main"],[1,"message"],[2,"font-weight","bold","font-size","large"],[2,"font-size","small"],[2,"font-size","medium","font-style","italic"],["class","message",3,"text-align"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0),t.SjG(1,b,10,12,"div",5,t.x6l),t.ALo(3,"async"),t.qZA()),2&i&&(t.xp6(1),t.wJu(t.lcZ(3,0,o.namedMessage$)))},dependencies:[u.Ov,u.uU],styles:[".group__main[_ngcontent-%COMP%]{width:100%;height:60vh;overflow-y:auto;border:1px gray solid;padding:20px;display:flex;flex-direction:column;row-gap:20px;background-color:#dac5ef}"]})}return n})(),U=(()=>{class n{constructor(){this.sendMessage=new t.vpe,this.messageBox=new a.cw({message:new a.NI("")})}onSubmit(){this.sendMessage.emit(this.messageBox.controls.message.value),this.messageBox.controls.message.reset()}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-message-box"]],outputs:{sendMessage:"sendMessage"},standalone:!0,features:[t.jDz],decls:9,vars:1,consts:[[1,"message-form",3,"formGroup","ngSubmit"],[1,"input-message"],["matInput","","formControlName","message","placeholder","type your message"],["newMessage",""],["matSuffix","","mat-icon-button","","color","primary","aria-label","button for send message","type","submit"]],template:function(i,o){1&i&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(1,"mat-form-field",1)(2,"mat-label"),t._uU(3,"Type your message"),t.qZA(),t._UZ(4,"input",2,3),t.TgZ(6,"button",4)(7,"mat-icon"),t._uU(8,"send"),t.qZA()()()()),2&i&&t.Q6J("formGroup",o.messageBox)},dependencies:[a.u5,a._Y,a.Fj,a.JJ,a.JL,g.ot,g.RK,v.lN,v.KE,v.hX,v.R9,p.Ps,p.Hw,r.c,r.Nt,a.UX,a.sg,a.u],styles:[".message-form[_ngcontent-%COMP%]{padding:15px 0}.input-message[_ngcontent-%COMP%]{width:100%}"]})}return n})();var B=s(4221);function w(n,T){if(1&n){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.deleteGroup())}),t._uU(1,"delete"),t.qZA()}}let G=(()=>{class n{constructor(e,i,o,l){this.router=e,this.store=i,this.route=o,this.dialog=l,this.since="",this.text="",this.newText=new t.vpe,this.group=$.ru}ngOnInit(){this.groupID=this.route.snapshot.params.id,this.store.dispatch(x.Bt({groupID:this.groupID})),this.store.dispatch(y.O1({groupID:this.groupID})),this.messages$=this.store.select(M.a),this.users$=this.store.select(M.gU),this.userId$=this.store.select(C.cP),this.groups$=this.store.select(M.pY),this.userGroup$=(0,c.a)([this.groups$,this.userId$]).pipe((0,D.U)(([e,i])=>e.filter(o=>o.createdBy.S==i).find(o=>o.id.S==this.groupID))),this.namedMessage$=(0,c.a)([this.messages$,this.users$]).pipe((0,D.U)(([e,i])=>{const o=[];return e&&e.slice().sort((l,m)=>+l.createdAt.S-+m.createdAt.S).map(l=>{const m=i.find(L=>L.uid.S==l.authorID.S);o.push({message:l,authorName:m?m.name.S:"Deleted",authorId:m.uid.S})}),o})),this.namedMessage$.subscribe(e=>{0!=e.length&&(this.since=e[e.length-1].message.createdAt.S,this.store.dispatch(x.TK({since:this.since,groupID:this.groupID})))})}update(){}deleteGroup(){this.dialog.open(A.z,{disableClose:!0}).afterClosed().subscribe(i=>{i&&this.store.dispatch(y.iE({id:this.groupID}))}),this.router.navigate(["/"])}sendMessage(e){this.store.dispatch(y.jr({groupID:this.groupID,message:e,since:this.since}))}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(d.F0),t.Y36(B.yh),t.Y36(d.gz),t.Y36(I.uw))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-group-dialog"]],inputs:{text:"text"},outputs:{newText:"newText"},standalone:!0,features:[t.jDz],decls:11,vars:5,consts:[[1,"page"],[1,"group__header"],["routerLink","/"],["fontIcon","arrow_back"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button",""],[3,"namedMessage$","userId$"],[3,"sendMessage"],["mat-flat-button","",3,"click"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"a",2),t._UZ(3,"mat-icon",3),t.qZA(),t.TgZ(4,"button",4),t.NdJ("click",function(){return o.update()}),t._uU(5,"update"),t.qZA(),t.YNc(6,w,2,0,"button",5),t.ALo(7,"async"),t.qZA(),t._UZ(8,"mat-divider")(9,"app-message-list",6),t.TgZ(10,"app-message-box",7),t.NdJ("sendMessage",function(m){return o.sendMessage(m)}),t.qZA()()),2&i&&(t.xp6(6),t.um2(6,t.lcZ(7,3,o.userGroup$)?6:-1),t.xp6(3),t.Q6J("namedMessage$",o.namedMessage$)("userId$",o.userId$))},dependencies:[u.ez,u.Ov,h.t,h.d,g.ot,g.lW,p.Ps,p.Hw,a.u5,v.lN,r.c,d.Bz,d.rH,I.Is,S,U],styles:[".page[_ngcontent-%COMP%]{width:800px;margin:0 auto}.group__header[_ngcontent-%COMP%]{width:100%;padding:5px 0;display:flex;justify-content:space-between}"]})}return n})()},6385:(Z,f,s)=>{s.d(f,{d:()=>p,t:()=>g});var t=s(9212),u=s(2495),h=s(3680);let p=(()=>{class r{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(a){this._vertical=(0,u.Ig)(a)}get inset(){return this._inset}set inset(a){this._inset=(0,u.Ig)(a)}static#t=this.\u0275fac=function(d){return new(d||r)};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(d,c){2&d&&(t.uIk("aria-orientation",c.vertical?"vertical":"horizontal"),t.ekj("mat-divider-vertical",c.vertical)("mat-divider-horizontal",!c.vertical)("mat-divider-inset",c.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(d,c){},styles:[".mat-divider{--mat-divider-width:1px;display:block;margin:0;border-top-style:solid;border-top-color:var(--mat-divider-color);border-top-width:var(--mat-divider-width)}.mat-divider.mat-divider-vertical{border-top:0;border-right-style:solid;border-right-color:var(--mat-divider-color);border-right-width:var(--mat-divider-width)}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0})}return r})(),g=(()=>{class r{static#t=this.\u0275fac=function(d){return new(d||r)};static#e=this.\u0275mod=t.oAB({type:r});static#s=this.\u0275inj=t.cJS({imports:[h.BQ,h.BQ]})}return r})()}}]);